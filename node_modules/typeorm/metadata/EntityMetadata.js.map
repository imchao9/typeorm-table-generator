{"version":3,"sources":["../../src/metadata/EntityMetadata.ts"],"names":[],"mappings":"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","file":"EntityMetadata.js","sourcesContent":["import {TableMetadata} from \"./TableMetadata\";\nimport {ColumnMetadata} from \"./ColumnMetadata\";\nimport {RelationMetadata, PropertyTypeInFunction} from \"./RelationMetadata\";\nimport {IndexMetadata} from \"./IndexMetadata\";\nimport {RelationTypes} from \"./types/RelationTypes\";\nimport {ForeignKeyMetadata} from \"./ForeignKeyMetadata\";\nimport {NamingStrategyInterface} from \"../naming-strategy/NamingStrategyInterface\";\nimport {EntityMetadataArgs} from \"../metadata-args/EntityMetadataArgs\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {LazyRelationsWrapper} from \"../lazy-loading/LazyRelationsWrapper\";\n\n// todo: IDEA. store all entity metadata in the EntityMetadata too? (this will open more features for metadata objects + no need to access connection in lot of places)\n\n/**\n * Contains all entity metadata.\n */\nexport class EntityMetadata {\n\n    // -------------------------------------------------------------------------\n    // Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * If entity's table is a closure-typed table, then this entity will have a closure junction table metadata.\n     */\n    closureJunctionTable: EntityMetadata;\n\n    /**\n     * Parent's entity metadata. Used in inheritance patterns.\n     */\n    parentEntityMetadata: EntityMetadata;\n\n    // -------------------------------------------------------------------------\n    // Public Readonly Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Naming strategy used to generate and normalize names.\n     */\n    readonly namingStrategy: NamingStrategyInterface;\n\n    /**\n     * Target class to which this entity metadata is bind.\n     * Note, that when using table inheritance patterns target can be different rather then table's target.\n     */\n    readonly target: Function|string;\n\n    /**\n     * Indicates if this entity metadata of a junction table, or not.\n     */\n    readonly junction: boolean;\n\n    /**\n     * Entity's table metadata.\n     */\n    readonly table: TableMetadata;\n\n    /**\n     * Entity's relation metadatas.\n     */\n    readonly relations: RelationMetadata[];\n\n    /**\n     * Entity's index metadatas.\n     */\n    readonly indices: IndexMetadata[];\n\n    /**\n     * Entity's foreign key metadatas.\n     */\n    readonly foreignKeys: ForeignKeyMetadata[] = [];\n\n    /**\n     * Entity's embedded metadatas.\n     */\n    readonly embeddeds: EmbeddedMetadata[];\n\n    /**\n     * If this entity metadata's table using one of the inheritance patterns,\n     * then this will contain what pattern it uses.\n     */\n    readonly inheritanceType?: \"single-table\"|\"class-table\";\n\n    /**\n     * If this entity metadata is a child table of some table, it should have a discriminator value.\n     * Used to store a value in a discriminator column.\n     */\n    readonly discriminatorValue?: string;\n\n    /**\n     * Global tables prefix. Customer can set a global table prefix for all tables in the database.\n     */\n    readonly tablesPrefix?: string;\n\n    // -------------------------------------------------------------------------\n    // Private properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity's column metadatas.\n     */\n    private readonly _columns: ColumnMetadata[];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(args: EntityMetadataArgs,\n                private lazyRelationsWrapper: LazyRelationsWrapper) {\n        this.target = args.target;\n        this.junction = args.junction;\n        this.tablesPrefix = args.tablesPrefix;\n        this.namingStrategy = args.namingStrategy;\n        this.table = args.tableMetadata;\n        this._columns = args.columnMetadatas || [];\n        this.relations = args.relationMetadatas || [];\n        this.indices = args.indexMetadatas || [];\n        this.foreignKeys = args.foreignKeyMetadatas || [];\n        this.embeddeds = args.embeddedMetadatas || [];\n        this.discriminatorValue = args.discriminatorValue;\n        this.inheritanceType = args.inheritanceType;\n\n        this.table.entityMetadata = this;\n        this._columns.forEach(column => column.entityMetadata = this);\n        this.relations.forEach(relation => relation.entityMetadata = this);\n        this.foreignKeys.forEach(foreignKey => foreignKey.entityMetadata = this);\n        this.indices.forEach(index => index.entityMetadata = this);\n        this.embeddeds.forEach(embedded => {\n            embedded.entityMetadata = this;\n            embedded.columns.forEach(column => column.entityMetadata = this);\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity's name. Equal to entity target class's name if target is set to table, or equals to table name if its set.\n     */\n    get name(): string {\n        if (!this.table)\n            throw new Error(\"No table target set to the entity metadata.\");\n\n        return this.targetName ? this.targetName : this.table.name;\n    }\n\n    /**\n     * Columns of the entity, including columns that are coming from the embeddeds of this entity.\n     */\n    get columns(): ColumnMetadata[] {\n        let allColumns: ColumnMetadata[] = ([] as ColumnMetadata[]).concat(this._columns);\n        this.embeddeds.forEach(embedded => {\n            allColumns = allColumns.concat(embedded.columns);\n        });\n        return allColumns;\n    }\n\n    /**\n     * All columns of the entity, including columns that are coming from the embeddeds of this entity,\n     * and including columns from the parent entities.\n     */\n    get allColumns(): ColumnMetadata[] {\n        let columns = this.columns;\n        if (this.parentEntityMetadata)\n            columns = columns.concat(this.parentEntityMetadata.columns);\n\n        return columns;\n    }\n\n    /**\n     * All relations of the entity, including relations from the parent entities.\n     */\n    get allRelations(): RelationMetadata[] {\n        let relations = this.relations;\n        if (this.parentEntityMetadata)\n            relations = relations.concat(this.parentEntityMetadata.relations);\n\n        return relations;\n    }\n\n    /**\n     * Gets the name of the target.\n     */\n    get targetName(): string {\n        if (typeof this.target === \"string\")\n            return this.target;\n\n        if (this.target instanceof Function)\n            return (<any> this.target).name;\n\n        return \"\";\n    }\n\n    /**\n     * Checks if entity's table has multiple primary columns.\n     */\n    get hasMultiplePrimaryKeys() {\n        return this.primaryColumns.length > 1;\n    }\n\n    /**\n     * Gets the primary column.\n     *\n     * @deprecated\n     */\n    get primaryColumn(): ColumnMetadata {\n        const primaryKey = this.primaryColumns[0];\n        if (!primaryKey)\n            throw new Error(`Primary key is not set for the ${this.name} entity.`);\n\n        return primaryKey;\n    }\n\n    /**\n     * Checks if table has generated column.\n     */\n    get hasGeneratedColumn(): boolean {\n        return !!this.generatedColumnIfExist;\n    }\n\n    /**\n     * Gets the column with generated flag.\n     */\n    get generatedColumn(): ColumnMetadata {\n        const generatedColumn = this.generatedColumnIfExist;\n        if (!generatedColumn)\n            throw new Error(`Generated column was not found`);\n\n        return generatedColumn;\n    }\n\n    /**\n     * Gets the generated column if it exists, or returns undefined if it does not.\n     */\n    get generatedColumnIfExist(): ColumnMetadata|undefined {\n        return this._columns.find(column => column.isGenerated);\n    }\n\n    /**\n     * Gets first primary column. In the case if table contains multiple primary columns it\n     * throws error.\n     */\n    get firstPrimaryColumn(): ColumnMetadata {\n        if (this.hasMultiplePrimaryKeys)\n            throw new Error(`Entity ${this.name} has multiple primary keys. This operation is not supported on entities with multiple primary keys`);\n\n        return this.primaryColumns[0];\n    }\n\n    /**\n     * Gets the primary columns.\n     */\n    get primaryColumns(): ColumnMetadata[] {\n        // const originalPrimaryColumns = this._columns.filter(column => column.isPrimary);\n        // const parentEntityPrimaryColumns = this.hasParentIdColumn ? [this.parentIdColumn] : [];\n        // return originalPrimaryColumns.concat(parentEntityPrimaryColumns);\n        return this._columns.filter(column => column.isPrimary);\n        // const originalPrimaryColumns = this._columns.filter(column => column.isPrimary);\n        // const parentEntityPrimaryColumns = this.parentEntityMetadata ? this.parentEntityMetadata.primaryColumns : [];\n        // return originalPrimaryColumns.concat(parentEntityPrimaryColumns);\n    }\n\n    get primaryColumnsWithParentIdColumns(): ColumnMetadata[] {\n        return this.primaryColumns.concat(this.parentIdColumns);\n    }\n\n    /**\n     * Gets all primary columns including columns from the parent entities.\n     */\n    get allPrimaryColumns(): ColumnMetadata[] {\n        return this.primaryColumns.concat(this.parentPrimaryColumns);\n    }\n\n    /**\n     * Gets the primary columns of the parent entity metadata.\n     * If parent entity metadata does not exist then it simply returns empty array.\n     */\n    get parentPrimaryColumns(): ColumnMetadata[] {\n        if (this.parentEntityMetadata)\n            return this.parentEntityMetadata.primaryColumns;\n\n        return [];\n    }\n\n    /**\n     * Gets only primary columns owned by this entity.\n     */\n    get ownPimaryColumns(): ColumnMetadata[] {\n        return this._columns.filter(column => column.isPrimary);\n    }\n\n    /**\n     * Checks if entity has a create date column.\n     */\n    get hasCreateDateColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"createDate\");\n    }\n\n    /**\n     * Gets entity column which contains a create date value.\n     */\n    get createDateColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"createDate\");\n        if (!column)\n            throw new Error(`CreateDateColumn was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    /**\n     * Checks if entity has an update date column.\n     */\n    get hasUpdateDateColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"updateDate\");\n    }\n\n    /**\n     * Gets entity column which contains an update date value.\n     */\n    get updateDateColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"updateDate\");\n        if (!column)\n            throw new Error(`UpdateDateColumn was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    /**\n     * Checks if entity has a version column.\n     */\n    get hasVersionColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"version\");\n    }\n\n    /**\n     * Gets entity column which contains an entity version.\n     */\n    get versionColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"version\");\n        if (!column)\n            throw new Error(`VersionColumn was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    /**\n     * Checks if entity has a discriminator column.\n     */\n    get hasDiscriminatorColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"discriminator\");\n    }\n\n    /**\n     * Gets the discriminator column used to store entity identificator in single-table inheritance tables.\n     */\n    get discriminatorColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"discriminator\");\n        if (!column)\n            throw new Error(`DiscriminatorColumn was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    /**\n     * Checks if entity has a tree level column.\n     */\n    get hasTreeLevelColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"treeLevel\");\n    }\n\n    get treeLevelColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"treeLevel\");\n        if (!column)\n            throw new Error(`TreeLevelColumn was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    /**\n     * Checks if entity has a tree level column.\n     */\n    get hasParentIdColumn(): boolean {\n        return !!this._columns.find(column => column.mode === \"parentId\");\n    }\n\n    get parentIdColumn(): ColumnMetadata {\n        const column = this._columns.find(column => column.mode === \"parentId\");\n        if (!column)\n            throw new Error(`Parent id column was not found in entity ${this.name}`);\n\n        return column;\n    }\n\n    get parentIdColumns(): ColumnMetadata[] {\n        return this._columns.filter(column => column.mode === \"parentId\");\n    }\n\n    /**\n     * Gets single (values of which does not contain arrays) relations.\n     */\n    get singleValueRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return relation.relationType === RelationTypes.ONE_TO_ONE || relation.relationType === RelationTypes.ONE_TO_MANY;\n        });\n    }\n\n    /**\n     * Gets single (values of which does not contain arrays) relations.\n     */\n    get multiValueRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return relation.relationType === RelationTypes.ONE_TO_ONE || relation.relationType === RelationTypes.ONE_TO_MANY;\n        });\n    }\n\n    /**\n     * Gets only one-to-one relations of the entity.\n     */\n    get oneToOneRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.ONE_TO_ONE);\n    }\n\n    /**\n     * Gets only owner one-to-one relations of the entity.\n     */\n    get ownerOneToOneRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.ONE_TO_ONE && relation.isOwning);\n    }\n\n    /**\n     * Gets only one-to-many relations of the entity.\n     */\n    get oneToManyRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.ONE_TO_MANY);\n    }\n\n    /**\n     * Gets only many-to-one relations of the entity.\n     */\n    get manyToOneRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.MANY_TO_ONE);\n    }\n\n    /**\n     * Gets only many-to-many relations of the entity.\n     */\n    get manyToManyRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.MANY_TO_MANY);\n    }\n\n    /**\n     * Gets only owner many-to-many relations of the entity.\n     */\n    get ownerManyToManyRelations(): RelationMetadata[] {\n        return this.relations.filter(relation => relation.relationType === RelationTypes.MANY_TO_MANY && relation.isOwning);\n    }\n\n    /**\n     * Gets only owner one-to-one and many-to-one relations.\n     */\n    get relationsWithJoinColumns() {\n        return this.ownerOneToOneRelations.concat(this.manyToOneRelations);\n    }\n\n    /**\n     * Checks if there is a tree parent relation. Used only in tree-tables.\n     */\n    get hasTreeParentRelation() {\n        return !!this.relations.find(relation => relation.isTreeParent);\n    }\n\n    /**\n     * Tree parent relation. Used only in tree-tables.\n     */\n    get treeParentRelation() {\n        const relation = this.relations.find(relation => relation.isTreeParent);\n        if (!relation)\n            throw new Error(`TreeParent relation was not found in entity ${this.name}`);\n\n        return relation;\n    }\n\n    /**\n     * Checks if there is a tree children relation. Used only in tree-tables.\n     */\n    get hasTreeChildrenRelation() {\n        return !!this.relations.find(relation => relation.isTreeChildren);\n    }\n\n    /**\n     * Tree children relation. Used only in tree-tables.\n     */\n    get treeChildrenRelation() {\n        const relation = this.relations.find(relation => relation.isTreeChildren);\n        if (!relation)\n            throw new Error(`TreeParent relation was not found in entity ${this.name}`);\n\n        return relation;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new entity.\n     */\n    create(): any {\n\n        // if target is set to a function (e.g. class) that can be created then create it\n        if (this.target instanceof Function)\n            return new (<any> this.target)();\n\n        // otherwise simply return a new empty object\n        const newObject = {};\n        this.relations\n            .filter(relation => relation.isLazy)\n            .forEach(relation => this.lazyRelationsWrapper.wrap(newObject, relation));\n\n        return newObject;\n    }\n\n    /**\n     * Creates an object - map of columns and relations of the entity.\n     */\n    createPropertiesMap(): { [name: string]: string|any } {\n        const entity: { [name: string]: string|any } = {};\n        this._columns.forEach(column => entity[column.propertyName] = column.propertyName);\n        this.relations.forEach(relation => entity[relation.propertyName] = relation.propertyName);\n        return entity;\n    }\n\n    /**\n     * Computes property name of the entity using given PropertyTypeInFunction.\n     */\n    computePropertyName(nameOrFn: PropertyTypeInFunction<any>) {\n        return typeof nameOrFn === \"string\" ? nameOrFn : nameOrFn(this.createPropertiesMap());\n    }\n\n    /**\n     * todo: undefined entities should not go there\n     */\n    getEntityIdMap(entity: any): ObjectLiteral|undefined {\n        if (!entity)\n            return undefined;\n\n        const map: ObjectLiteral = {};\n        if (this.parentEntityMetadata) {\n            this.primaryColumnsWithParentIdColumns.forEach(column => {\n                const entityValue = entity[column.propertyName];\n                if (entityValue === null || entityValue === undefined)\n                    return;\n\n                // if entity id is a relation, then extract referenced column from that relation\n                const columnRelation = this.relations.find(relation => relation.propertyName === column.propertyName);\n\n                if (columnRelation && columnRelation.joinColumn) {\n                    map[column.propertyName] = entityValue[columnRelation.joinColumn.referencedColumn.propertyName];\n                } else if (columnRelation && columnRelation.inverseRelation.joinColumn) {\n                    map[column.propertyName] = entityValue[columnRelation.inverseRelation.joinColumn.referencedColumn.propertyName];\n                } else {\n                    map[column.propertyName] = entityValue;\n                }\n            });\n\n        } else {\n            this.primaryColumns.forEach(column => {\n                const entityValue = entity[column.propertyName];\n                if (entityValue === null || entityValue === undefined)\n                    return;\n\n                // if entity id is a relation, then extract referenced column from that relation\n                const columnRelation = this.relations.find(relation => relation.propertyName === column.propertyName);\n\n                if (columnRelation && columnRelation.joinColumn) {\n                    map[column.propertyName] = entityValue[columnRelation.joinColumn.referencedColumn.propertyName];\n                } else if (columnRelation && columnRelation.inverseRelation.joinColumn) {\n                    map[column.propertyName] = entityValue[columnRelation.inverseRelation.joinColumn.referencedColumn.propertyName];\n                } else {\n                    map[column.propertyName] = entityValue;\n                }\n            });\n        }\n        return Object.keys(map).length > 0 ? map : undefined;\n    }\n\n    /**\n     * Same as getEntityIdMap, but instead of id column property names it returns database column names.\n     */\n    getDatabaseEntityIdMap(entity: ObjectLiteral): ObjectLiteral|undefined {\n        const map: ObjectLiteral = {};\n        if (this.parentEntityMetadata) {\n            this.primaryColumnsWithParentIdColumns.forEach(column => {\n                const entityValue = entity[column.propertyName];\n                if (entityValue === null || entityValue === undefined)\n                    return;\n\n                // if entity id is a relation, then extract referenced column from that relation\n                const columnRelation = this.relations.find(relation => relation.propertyName === column.propertyName);\n\n                if (columnRelation && columnRelation.joinColumn) {\n                    map[column.name] = entityValue[columnRelation.joinColumn.referencedColumn.propertyName];\n                } else if (columnRelation && columnRelation.inverseRelation.joinColumn) {\n                    map[column.name] = entityValue[columnRelation.inverseRelation.joinColumn.referencedColumn.propertyName];\n                } else {\n                    map[column.name] = entityValue;\n                }\n            });\n\n        } else {\n            this.primaryColumns.forEach(column => {\n                const entityValue = entity[column.propertyName];\n                if (entityValue === null || entityValue === undefined)\n                    return;\n\n                // if entity id is a relation, then extract referenced column from that relation\n                const columnRelation = this.relations.find(relation => relation.propertyName === column.propertyName);\n\n                if (columnRelation && columnRelation.joinColumn) {\n                    map[column.name] = entityValue[columnRelation.joinColumn.referencedColumn.propertyName];\n                } else if (columnRelation && columnRelation.inverseRelation.joinColumn) {\n                    map[column.name] = entityValue[columnRelation.inverseRelation.joinColumn.referencedColumn.propertyName];\n                } else {\n                    map[column.name] = entityValue;\n                }\n            });\n        }\n        const hasAllIds = Object.keys(map).every(key => {\n            return map[key] !== undefined && map[key] !== null;\n        });\n        return hasAllIds ? map : undefined;\n    }\n\n    /**\n\n    createSimpleIdMap(id: any): ObjectLiteral {\n        const map: ObjectLiteral = {};\n        if (this.parentEntityMetadata) {\n            this.primaryColumnsWithParentIdColumns.forEach(column => {\n                map[column.propertyName] = id;\n            });\n\n        } else {\n            this.primaryColumns.forEach(column => {\n                map[column.propertyName] = id;\n            });\n        }\n        return map;\n    } */\n\n    /**\n     * Same as createSimpleIdMap, but instead of id column property names it returns database column names.\n\n    createSimpleDatabaseIdMap(id: any): ObjectLiteral {\n        const map: ObjectLiteral = {};\n        if (this.parentEntityMetadata) {\n            this.primaryColumnsWithParentIdColumns.forEach(column => {\n                map[column.name] = id;\n            });\n\n        } else {\n            this.primaryColumns.forEach(column => {\n                map[column.name] = id;\n            });\n        }\n        return map;\n    }*/\n\n    /**\n     * todo: undefined entities should not go there??\n     * todo: shouldnt be entity ObjectLiteral here?\n     */\n    getEntityIdMixedMap(entity: any): any {\n        if (!entity)\n            return undefined;\n\n        const idMap = this.getEntityIdMap(entity);\n        if (this.hasMultiplePrimaryKeys) {\n            return idMap;\n\n        } else if (idMap) {\n            return idMap[this.firstPrimaryColumn.propertyName]; // todo: what about parent primary column?\n        }\n\n        return idMap;\n    }\n\n    /**\n     * Same as `getEntityIdMap` but the key of the map will be the column names instead of the property names.\n     */\n    getEntityIdColumnMap(entity: any): ObjectLiteral|undefined {\n        return this.transformIdMapToColumnNames(this.getEntityIdMap(entity));\n    }\n\n    transformIdMapToColumnNames(idMap: ObjectLiteral|undefined) {\n        if (!idMap) {\n            return idMap;\n        }\n        const map: ObjectLiteral = {};\n        Object.keys(idMap).forEach(propertyName => {\n            const column = this.getColumnByPropertyName(propertyName);\n            if (column) {\n                map[column.name] = idMap[propertyName];\n            }\n        });\n        return map;\n    }\n\n    getColumnByPropertyName(propertyName: string) {\n        return this._columns.find(column => column.propertyName === propertyName);\n    }\n\n    /**\n     * Checks if column with the given property name exist.\n     */\n    hasColumnWithPropertyName(propertyName: string): boolean {\n        return !!this._columns.find(column => column.propertyName === propertyName);\n    }\n\n    /**\n     * Checks if column with the given database name exist.\n     */\n    hasColumnWithDbName(name: string): boolean {\n        return !!this._columns.find(column => column.name === name);\n    }\n\n    /**\n     * Checks if relation with the given property name exist.\n     */\n    hasRelationWithPropertyName(propertyName: string): boolean {\n        return !!this.relations.find(relation => relation.propertyName === propertyName);\n    }\n\n    /**\n     * Finds relation with the given property name.\n     */\n    findRelationWithPropertyName(propertyName: string): RelationMetadata {\n        const relation = this.relations.find(relation => relation.propertyName === propertyName);\n        if (!relation)\n            throw new Error(`Relation with property name ${propertyName} in ${this.name} entity was not found.`);\n\n        return relation;\n    }\n\n    /**\n     * Checks if relation with the given name exist.\n     */\n    hasRelationWithDbName(dbName: string): boolean {\n        return !!this.relationsWithJoinColumns.find(relation => relation.name === dbName);\n    }\n\n    /**\n     * Finds relation with the given name.\n     */\n    findRelationWithDbName(name: string): RelationMetadata {\n        const relation = this.relationsWithJoinColumns.find(relation => relation.name === name);\n        if (!relation)\n            throw new Error(`Relation with name ${name} in ${this.name} entity was not found.`);\n\n        return relation;\n    }\n\n    addColumn(column: ColumnMetadata) {\n        this._columns.push(column);\n        column.entityMetadata = this;\n    }\n\n    extractNonEmptyColumns(object: ObjectLiteral): ColumnMetadata[] {\n        return this.columns.filter(column => !!object[column.propertyName]);\n    }\n\n    extractNonEmptySingleValueRelations(object: ObjectLiteral): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return (relation.relationType === RelationTypes.ONE_TO_ONE || relation.relationType === RelationTypes.MANY_TO_ONE)\n                && !!object[relation.propertyName];\n        });\n    }\n\n    extractNonEmptyMultiValueRelations(object: ObjectLiteral): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return (relation.relationType === RelationTypes.MANY_TO_MANY || relation.relationType === RelationTypes.ONE_TO_MANY)\n                && !!object[relation.propertyName];\n        });\n    }\n\n    extractExistSingleValueRelations(object: ObjectLiteral): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return (relation.relationType === RelationTypes.ONE_TO_ONE || relation.relationType === RelationTypes.MANY_TO_ONE)\n                && object.hasOwnProperty(relation.propertyName);\n        });\n    }\n\n    extractExistMultiValueRelations(object: ObjectLiteral): RelationMetadata[] {\n        return this.relations.filter(relation => {\n            return (relation.relationType === RelationTypes.MANY_TO_MANY || relation.relationType === RelationTypes.ONE_TO_MANY)\n                && object.hasOwnProperty(relation.propertyName);\n        });\n    }\n\n    checkIfObjectContainsAllPrimaryKeys(object: ObjectLiteral) {\n        return this.primaryColumns.every(primaryColumn => {\n            return object.hasOwnProperty(primaryColumn.propertyName);\n        });\n    }\n\n    compareEntities(firstEntity: any, secondEntity: any) {\n        const firstEntityIds = this.getEntityIdMap(firstEntity);\n        const secondEntityIds = this.getEntityIdMap(secondEntity);\n        return this.compareIds(firstEntityIds, secondEntityIds);\n    }\n\n    compareIds(firstId: ObjectLiteral|undefined, secondId: ObjectLiteral|undefined): boolean {\n        if (firstId === undefined || firstId === null || secondId === undefined || secondId === null)\n            return false;\n\n        return Object.keys(firstId).every(key => {\n            return firstId[key] === secondId[key];\n        });\n    }\n\n    /**\n     * Compares two entity ids.\n     * If any of the given value is empty then it will return false.\n     */\n    compareEntityMixedIds(firstId: any, secondId: any): boolean {\n        if (firstId === undefined || firstId === null || secondId === undefined || secondId === null)\n            return false;\n\n        if (this.hasMultiplePrimaryKeys) {\n            return Object.keys(firstId).every(key => {\n                return firstId[key] === secondId[key];\n            });\n        } else {\n            return firstId === secondId;\n        }\n    }\n\n    /**\n     * Iterates throw entity and finds and extracts all values from relations in the entity.\n     * If relation value is an array its being flattened.\n     */\n    extractRelationValuesFromEntity(entity: ObjectLiteral, relations: RelationMetadata[]): [RelationMetadata, any, EntityMetadata][] {\n        const relationsAndValues: [RelationMetadata, any, EntityMetadata][] = [];\n        relations.forEach(relation => {\n            const value = relation.getEntityValue(entity);\n            if (value instanceof Array) {\n                value.forEach(subValue => relationsAndValues.push([relation, subValue, relation.inverseEntityMetadata]));\n            } else if (value) {\n                relationsAndValues.push([relation, value, relation.inverseEntityMetadata]);\n            }\n        });\n        return relationsAndValues;\n    }\n\n    /**\n     * Checks if given entity has an id.\n     */\n    hasId(entity: ObjectLiteral): boolean {\n\n        // if (this.metadata.parentEntityMetadata) {\n        //     return this.metadata.parentEntityMetadata.parentIdColumns.every(parentIdColumn => {\n        //         const columnName = parentIdColumn.propertyName;\n        //         return !!entity &&\n        //             entity.hasOwnProperty(columnName) &&\n        //             entity[columnName] !== null &&\n        //             entity[columnName] !== undefined &&\n        //             entity[columnName] !== \"\";\n        //     });\n\n        // } else {\n        return this.primaryColumns.every(primaryColumn => {\n            const columnName = primaryColumn.propertyName;\n            return !!entity &&\n                entity.hasOwnProperty(columnName) &&\n                entity[columnName] !== null &&\n                entity[columnName] !== undefined &&\n                entity[columnName] !== \"\";\n        });\n        // }\n    }\n\n    /**\n     * Checks if there any non-nullable column exist in this entity.\n     */\n    get hasNonNullableColumns(): boolean {\n        return this.relationsWithJoinColumns.some(relation => !relation.isNullable || relation.isPrimary);\n        // return this.relationsWithJoinColumns.some(relation => relation.isNullable || relation.isPrimary);\n    }\n\n}"],"sourceRoot":".."}